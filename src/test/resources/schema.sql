CREATE TABLE IF NOT EXISTS characters (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    race VARCHAR(50) NOT NULL,
    title VARCHAR(100),
    owner VARCHAR(100),
    gender VARCHAR(50),
    age BIGINT,
    weight BIGINT,
    height BIGINT,
    hunger BIGINT,
    thirst BIGINT,
    sleep BIGINT,
    ranking_id BIGINT
);

CREATE TABLE IF NOT EXISTS parts (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    max_health BIGINT NOT NULL,
    name VARCHAR(100) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS skills (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description VARCHAR(500),
    required_experience BIGINT,
    physical_cost BIGINT,
    mental_cost BIGINT,
    is_upgradable BOOLEAN,
    upgrade_level BIGINT,
    upgrade_points BIGINT,
    UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS styles (
    id BIGINT generated BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    style_class varchar(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS stats (
    id VARCHAR(3) PRIMARY KEY,
    level_up_experience BIGINT NOT NULL,
    name VARCHAR(50) NOT NULL UNIQUE
);


CREATE TABLE IF NOT EXISTS items (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    price BIGINT NOT NULL,
    description VARCHAR(200),
    name VARCHAR(50) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS  ranking_levels (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    rank_level BIGINT NOT NULL UNIQUE,
    points_required BIGINT NOT NULL,
    description VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS character_parts (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    character_id BIGINT NOT NULL,
    current_health BIGINT NOT NULL,
    part_id BIGINT NOT NULL,
    FOREIGN KEY (part_id) REFERENCES parts(id),
    FOREIGN KEY (character_id) REFERENCES characters(id)
);

CREATE TABLE IF NOT EXISTS character_skills (
    character_id BIGINT,
    skill_id BIGINT,
    PRIMARY KEY (character_id, skill_id)
);

CREATE TABLE character_stats (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    character_id BIGINT NOT NULL,
    stat_id VARCHAR(3) NOT NULL,
    experience BIGINT NOT NULL,
    level BIGINT NOT NULL,
    mastery BIGINT NOT NULL,
    bonus BIGINT NOT NULL,
    penalty BIGINT NOT NULL,
    stat_limit BIGINT NOT NULL,
    FOREIGN KEY (character_id) REFERENCES characters(id) ON DELETE CASCADE,
    FOREIGN KEY (stat_id) REFERENCES stats(id) ON DELETE CASCADE
);

-- Add a unique constraint to ensure one stat per character
ALTER TABLE character_stats ADD CONSTRAINT uk_character_stat UNIQUE (character_id, stat_id);

CREATE TABLE IF NOT EXISTS character_styles (
    character_id BIGINT NOT NULL,
    style_id BIGINT NOT NULL,
    PRIMARY KEY (character_id, style_id)
);

CREATE TABLE IF NOT EXISTS stat_race_definitions (
    stat_id VARCHAR(3) NOT NULL,
    race VARCHAR(50) NOT NULL,
    race_limit BIGINT NOT NULL,
    race_experience_multiplier DECIMAL(4,2) NOT NULL,
    PRIMARY KEY (stat_id, race),
    FOREIGN KEY (stat_id) REFERENCES stats(id) ON DELETE CASCADE
);


INSERT INTO parts (max_health, name) VALUES (100, 'Head');
INSERT INTO parts (max_health, name) VALUES (100, 'Torso');
INSERT INTO parts (max_health, name) VALUES (100, 'Left Arm');
INSERT INTO parts (max_health, name) VALUES (100, 'Right Arm');
INSERT INTO parts (max_health, name) VALUES (100, 'Left Leg');
INSERT INTO parts (max_health, name) VALUES (100, 'Right Leg');
INSERT INTO parts (max_health, name) VALUES (100, 'Left Ear-Arm');
INSERT INTO parts (max_health, name) VALUES (100, 'Right Ear-Arm');
INSERT INTO parts (max_health, name) VALUES (100, 'Tail');
INSERT INTO parts (max_health, name) VALUES (100, 'Left Wing');
INSERT INTO parts (max_health, name) VALUES (100, 'Right Wing');
INSERT INTO parts (max_health, name) VALUES (100, 'Eye');
INSERT INTO parts (max_health, name) VALUES (100, 'Equine Torso');
INSERT INTO parts (max_health, name) VALUES (100, 'Engine');

INSERT INTO stats (id, level_up_experience, name) VALUES ('VIT', 1000, 'Vitalidad');
INSERT INTO stats (id, level_up_experience, name) VALUES ('MAN', 1000, 'Mana');
INSERT INTO stats (id, level_up_experience, name) VALUES ('FUE', 1000, 'Fuerza');
INSERT INTO stats (id, level_up_experience, name) VALUES ('DEF', 1000, 'Defensa');
INSERT INTO stats (id, level_up_experience, name) VALUES ('MAG', 1000, 'Magia');
INSERT INTO stats (id, level_up_experience, name) VALUES ('ESP', 1000, 'Espiritu');
INSERT INTO stats (id, level_up_experience, name) VALUES ('CON', 1000, 'Conjuracion');
INSERT INTO stats (id, level_up_experience, name) VALUES ('INT', 1000, 'Inteligencia');
INSERT INTO stats (id, level_up_experience, name) VALUES ('EQU', 1000, 'Equilibrio');
INSERT INTO stats (id, level_up_experience, name) VALUES ('AGI', 1000, 'Agilidad');
INSERT INTO stats (id, level_up_experience, name) VALUES ('SIG', 1000, 'Sigilo');
INSERT INTO stats (id, level_up_experience, name) VALUES ('DES', 1000, 'Destreza');
INSERT INTO stats (id, level_up_experience, name) VALUES ('IMG', 1000, 'Imaginacion');
INSERT INTO stats (id, level_up_experience, name) VALUES ('SNS', 1000, 'Sensorial');
INSERT INTO stats (id, level_up_experience, name) VALUES ('ELO', 1000, 'Elocuencia');
INSERT INTO stats (id, level_up_experience, name) VALUES ('EST', 1000, 'Estilo');
INSERT INTO stats (id, level_up_experience, name) VALUES ('SUE', 1000, 'Suerte');
INSERT INTO stats (id, level_up_experience, name) VALUES ('DET', 1000, 'Determinacion');
INSERT INTO stats (id, level_up_experience, name) VALUES ('ABS', 1000, 'Absurdez');
INSERT INTO stats (id, level_up_experience, name) VALUES ('APL', 1000, 'Aplicado');
INSERT INTO stats (id, level_up_experience, name) VALUES ('AGU', 1000, 'Aguante');
INSERT INTO stats (id, level_up_experience, name) VALUES ('EFI', 1000, 'Est. Fisica');
INSERT INTO stats (id, level_up_experience, name) VALUES ('EME', 1000, 'Est. Mental');
INSERT INTO stats (id, level_up_experience, name) VALUES ('CAN', 1000, 'Cansancio');
INSERT INTO stats (id, level_up_experience, name) VALUES ('CCU', 1000, 'Cap. Curativa');
INSERT INTO stats (id, level_up_experience, name) VALUES ('XYR', 1000, 'Xyr');
INSERT INTO stats (id, level_up_experience, name) VALUES ('EPS', 1000, 'Energia Positiva');
INSERT INTO stats (id, level_up_experience, name) VALUES ('ENG', 1000, 'Energia Negativa');
INSERT INTO stats (id, level_up_experience, name) VALUES ('DLL', 1000, 'Desarrollo');
INSERT INTO stats (id, level_up_experience, name) VALUES ('RYL', 1000, 'Ryll');
INSERT INTO stats (id, level_up_experience, name) VALUES ('FEE', 1000, 'Fe');
INSERT INTO stats (id, level_up_experience, name) VALUES ('SON', 1000, 'Sonido');
INSERT INTO stats (id, level_up_experience, name) VALUES ('PSY', 1000, 'Psycho');

INSERT INTO styles (name, style_class) VALUES ('Caballero', 'Guerrero');
INSERT INTO styles (name, style_class) VALUES ('Artista Marcial', 'Guerrero');
INSERT INTO styles (name, style_class) VALUES ('Adepto', 'Mago');
INSERT INTO styles (name, style_class) VALUES ('Chaman', 'Mago');
INSERT INTO styles (name, style_class) VALUES ('Cientifico', 'Trabajador');
INSERT INTO styles (name, style_class) VALUES ('Medico', 'Trabajador');


INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('VIT', 'KANION', 20, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('MAN', 'KANION', 20, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('FUE', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('DEF', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('MAG', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('ESP', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('CON', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('INT', 'KANION', 8, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('EQU', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('AGI', 'KANION', 6, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('SIG', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('DES', 'KANION', 8, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('IMG', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('SNS', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('ELO', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('EST', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('SUE', 'KANION', 5, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('DET', 'KANION', 10, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('ABS', 'KANION', 10, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('APL', 'KANION', -1, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('AGU', 'KANION', 30, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('EFI', 'KANION', 20, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('EME', 'KANION', 20, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('CAN', 'KANION', 0, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('CCU', 'KANION', 0, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('XYR', 'KANION', 0, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('EPS', 'KANION', 0, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('ENG', 'KANION', 0, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('DLL', 'KANION', 0, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('RYL', 'KANION', 0, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('FEE', 'KANION', 0, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('SON', 'KANION', 0, 1.5);
INSERT INTO stat_race_definitions (stat_id, race, race_limit, race_experience_multiplier) VALUES ('PSY', 'KANION', 0, 1.5);

INSERT INTO public.ranking_levels id, rank_level, points_required, description) VALUES(1, 1, 0, 'Infanteria');
INSERT INTO public.ranking_levels
(id, rank_level, points_required, description)
VALUES(2, 2, 10, 'Caballero');
INSERT INTO public.ranking_levels
(id, rank_level, points_required, description)
VALUES(4, 4, 100, 'Bronce');
INSERT INTO public.ranking_levels
(id, rank_level, points_required, description)
VALUES(5, 5, 250, 'Plata');
INSERT INTO public.ranking_levels
(id, rank_level, points_required, description)
VALUES(6, 6, 500, 'Oro');
INSERT INTO public.ranking_levels
(id, rank_level, points_required, description)
VALUES(7, 7, 750, 'Platino');
INSERT INTO public.ranking_levels
(id, rank_level, points_required, description)
VALUES(8, 8, 1000, 'Estelar');
INSERT INTO public.ranking_levels
(id, rank_level, points_required, description)
VALUES(9, 9, 500, 'Omega');
